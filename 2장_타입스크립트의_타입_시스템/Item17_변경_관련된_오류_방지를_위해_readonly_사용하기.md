## ğŸ“• ì˜¤ëŠ˜ ì½ì€ ë‚´ìš©, ì´ëŸ° ì‹ìœ¼ë¡œ ì •ë¦¬í•´ ë´…ì‹œë‹¤. âœ’

**TIL(Today I learn) ê¸°ë¡ì¼** : 2022.01.23

**ì˜¤ëŠ˜ ì½ì€ ë²”ìœ„** : 17. ë³€ê²½ ê´€ë ¨ëœ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ readonly ì‚¬ìš©í•˜ê¸° 


# Item 17. ë³€ê²½ ê´€ë ¨ëœ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ readonly ì‚¬ìš©í•˜ê¸° 

>ë‹¤ìŒì€ ì‚¼ê°ìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.   
```ts
function arraySum(arr: number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
    sum += num;
  }
  return sum;
}
function printTriangles(n: number) {
  const nums = [];
  for (let i = 0; i < n; i++) {
    nums.push(i);
    console.log(arraySum(nums));
  }
}
```

>ì½”ë“œëŠ” ê°„ë‹¨í•˜ë‚˜ ì‹¤í–‰í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
```
>printTriangles(5)
0
1
2
3
4

```
>arraySumì´ numsì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°„ì£¼í•´ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.
>ì´ ë¬¸ì œëŠ” ë‹¤ìŒ ì½”ë“œì™€ ê°™ì´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
```ts
function arraySum(arr: number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
    sum += num;
  }
  return sum;
}
```

ì´ í•¨ìˆ˜ëŠ” ë°°ì—´ ì•ˆì˜ ìˆ«ìë“¤ì„ ëª¨ë‘ í•©ì¹œê²ƒì´ë‹¤.   
ê·¸ëŸ°ë° ê³„ì‚°ì´ ëë‚˜ë©´ ì›ë˜ ë°°ì—´ì´ ì „ë¶€ ë¹„ê²Œ ëœë‹¤.   
ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°°ì—´ì€ ë‚´ìš©ì„ ë³€ê²½í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ì—­ì‹œ ì˜¤ë¥˜ ì—†ì´ í†µê³¼í•˜ê²Œëœë‹¤.
  
>ì˜¤ë¥˜ì˜ ë²”ìœ„ë¥¼ ì¢íˆê¸° ìœ„í•´ arraySumì´ ë°°ì—´ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì„ ì–¸ì„ í•´ë³¸ë‹¤ë©´?
>`readonly` ì ‘ê·¼ ì œì–´ìë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
```ts

function arraySum(arr: readonly number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
                 // ~~~ 'pop' does not exist on type 'readonly number[]'
    sum += num;
  }
  return sum;
}
```
readonly number []ëŠ” 'íƒ€ì…'ì´ê³ , number[]ì™€ êµ¬ë¶„ë˜ëŠ” ëª‡ ê°€ì§€ íŠ¹ì§•ì´ ìˆë‹¤.
  - ë°°ì—´ì˜ ìš”ì†Œë¥¼ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ì“¸ìˆ˜ëŠ” ì—†ë‹¤.
  - lengthë¥¼ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ë°”ê¿€ ìˆ˜ëŠ” ì—†ë‹¤.(ë°°ì—´ì„ ë³€ê²½í•¨)
  - ë°°ì—´ì„ ë³€ê²½í•˜ëŠ” popì„ ë¹„ë¡¯í•œ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
number[]ëŠ” readonly number[]ë³´ë‹¤ ê¸°ëŠ¥ì´ ë§ê¸° ë•Œë¬¸ì—, readonly number[]ì˜ ì„œë¸Œíƒ€ì…ì´ ëœë‹¤.
ë”°ë¼ì„œ ë³€ê²½ ê°€ëŠ¥í•œ ë°°ì—´ì„ readonly ë°°ì—´ì— í• ë‹¹í•  ìˆ˜ ìˆë‹¤.   
í•˜ì§€ë§Œ ê·¸ ë°˜ëŒ€ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.  
```ts
const a: number[] = [1, 2, 3];
const b: readonly number[] = a;
const c: number[] = b;
   // ~ Type 'readonly number[]' is 'readonly' and cannot be
   //   assigned to the mutable type 'number[]'
```
íƒ€ì… ë‹¨ì–¸ë¬¸ ì—†ì´ `readonly` ì ‘ê·¼ì œì–´ìë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤ë©´ `readonly`ëŠ” ì“¸ëª¨ì—†ì„ ê²ƒì´ë¯€ë¡œ ì—¬ê¸°ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²Œ ë§ë‹¤.   
   
 ë§¤ê°œë³€ìˆ˜ë¥¼ `readonly`ë¡œ ì„ ì–¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¼ì´ ìƒê¸´ë‹¤.   
 - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ í•¨ìˆ˜ ë‚´ì—ì„œ ë³€ê²½ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì²´í¬í•œë‹¤.
 - í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œëŠ” í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë³´ì¥ì„ ë°›ê²Œ ëœë‹¤.
 - í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ í•¨ìˆ˜ì— readonly ë°°ì—´ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.

   
 ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ”(íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ë§ˆì°¬ê°€ì§€) ëª…ì‹œì ìœ¼ë¡œ ì–¸ê¸‰í•˜ì§€ ì•ŠëŠ” í•œ, í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°€ì •í•œë‹¤.   
 ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ì•”ë¬µì ì¸ ë°©ë²•ì€ íƒ€ì… ì²´í¬ì— ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.   
 ëª…ì‹œì ì¸ ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì»´íŒŒì¼ëŸ¬ì™€ ì‚¬ëŒëª¨ë‘ì—ê²Œ ì¢‹ë‹¤.   
    
  >ì• ì˜ˆì œì˜ arraySumì„ ê³ ì¹˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•˜ë‹¤.   
  >ë°°ì—´ì„ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë©´ ëœë‹¤.  
  ```ts
  function arraySum(arr: readonly number[]) {
  let sum = 0;
  for (const num of arr) {
    sum += num;
  }
  return sum;
}
  ```
  >ì´ì œ printTrianglesì´ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤.
  ```
  >printTriangles(5)
  0
  1
  3
  6
  10
  ```
  
  ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, `readonly`ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤.   
  ë” ë„“ì€ íƒ€ì…ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆê³ , ì˜ë„ì¹˜ ì•Šì€ ë³€ê²½ì€ ë°©ì§€ë  ê²ƒì´ë‹¤. ì´ë¡œ ì¸í•œ ë‹¨ì ì€ ìƒëŒ€ì ìœ¼ë¡œ ì ë‹¤.   
     
êµ³ì´ ì°¾ì•„ë³´ìë©´ ë§¤ê°œë³€ìˆ˜ê°€ readonlyë¡œ ì„ ì–¸ë˜ì§€ ì•Šì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•  ê²½ìš°ë„ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.   
ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤ë©´ readonlyë¡œ ì„ ì–¸í•˜ë©´ ëœë‹¤.   
ê·¸ëŸ°ë° ì–´ë–¤ í•¨ìˆ˜ë¥¼ `readonly`ë¡œ ë§Œë“¤ë©´, ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë„ ëª¨ë‘ `readonly`ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.   
ê·¸ëŸ¬ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…í™•íˆ í•˜ê³  íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê¼­ ë‹¨ì ì´ë¼ê³  ë³¼ ìˆœ ì—†ë‹¤.   
ê·¸ëŸ¬ë‚˜ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìˆëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ë¼ë©´, íƒ€ì… ì„ ì–¸ì„ ë°”ê¿€ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ íƒ€ì… ë‹¨ì–¸ë¬¸(as number[])ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   
   
readonlyë¥¼ ì‚¬ìš©í•˜ë©´ ì§€ì—­ ë³€ìˆ˜ì™€ ê´€ë ¨ëœ ëª¨ë“  ì¢…ë¥˜ì˜ ë³€ê²½ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.   
ì˜ˆë¥¼ ë“¤ì–´ ì†Œì„¤ì— ë‹¤ì–‘í•œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“ ë‹¤ê³  ê°€ì •í•´ë³´ì.   
ì—°ì†ëœ í–‰ì„ ê°€ì ¸ì™€ì„œ ë¹ˆ ì¤„ì„ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„ë˜ëŠ” ë‹¨ë½ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.   

```ts
function parseTaggedText(lines: string[]): string[][] {
  const paragraphs: string[][] = [];
  const currPara: string[] = [];

  const addParagraph = () => {
    if (currPara.length) {
      paragraphs.push(currPara);
      currPara.length = 0;  // Clear the lines
    }
  };

  for (const line of lines) {
    if (!line) {
      addParagraph();
    } else {
      currPara.push(line);
    }
  }
  addParagraph();
  return paragraphs;
}
```

ì†Œì„¤ì„ ì…ë ¥ìœ¼ë¡œ ë„£ê³  ì‹¤í–‰í•˜ë©´, ë‹¤ìŒ ì²˜ëŸ¼ ì¶œë ¥ëœë‹¤.
```
[ [], [], [] ]
```
ë­”ê°€ ì´ìƒí•˜ë‹¤.   
ì´ ì½”ë“œì˜ ë¬¸ì œì ì€ ë³„ì¹­ê³¼ ë³€ê²½ì„ ë™ì‹œì— ì‚¬ìš©í•´ ë°œìƒí–ˆë‹¤.   
ë³„ì¹­ì€ ë‹¤ìŒ í–‰ì—ì„œ ë°œìƒí•œë‹¤.   
```ts
paragraphs.push(currPara);
```
currParaì˜ ë‚´ìš©ì´ ì‚½ì…ë˜ì§€ ì•Šê³  ë°°ì—´ì˜ ì°¸ì¡°ê°€ ì‚½ì…ë˜ì—ˆë‹¤.   
currParaì— ìƒˆ ê°’ì„ ì±„ìš°ê±°ë‚˜ ì§€ìš°ë‹¤ë©´ ë™ì¼í•œ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” paragraphs ìš”ì†Œì—ë„ ë³€ê²½ì´ ë°˜ì˜ëœë‹¤.   

---


`readonly`ëŠ” ì––ê²Œ ë™ì‘í•œë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ë©° ì‚¬ìš©í•´ì•¼ í•œë‹¤.   
ì•ì—ì„œ ì´ë¯¸ `readonly string[][]`ì„ ë´¤ë‹¤.   
ë§Œì•½ ê°ì²´ì˜ readonly ë°°ì—´ì´ ì‡ë‹¤.ë©´, ê·¸ ê°ì²´ ìì²´ëŠ” `readonly`ê°€ ì•„ë‹ˆë‹¤.
```ts
const dates: readonly Date[] = [new Date()];
dates.push(new Date());
   // ~~~~ Property 'push' does not exist on type 'readonly Date[]'
dates[0].setFullYear(2037);  // ì •ìƒ
```

>ë¹„ìŠ·í•œ ê²½ìš°ê°€ readonlyì˜ ì‚¬ì´Œ ê²©ì´ì ê°ì²´ì— ì‚¬ìš©ë˜ëŠ” `Readonly` ì œë„ˆë¦­ì—ë„ í•´ë‹¹ëœë‹¤.
```ts
interface Outer {
  inner: {
    x: number;
  }
}
const o: Readonly<Outer> = { inner: { x: 0 }};
o.inner = { x: 1 };
// ~~~~ Cannot assign to 'inner' because it is a read-only property
o.inner.x = 1;  // ì •ìƒ
```
   
 >íƒ€ì… ë³„ì¹­ì„ ë§Œë“  ë‹¤ìŒì— ì •í™•íˆ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í¸ì§‘ê¸°ì—ì„œ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.   
 ```ts
interface Outer {
  inner: {
    x: number;
  }
}
const o: Readonly<Outer> = { inner: { x: 0 }};
o.inner = { x: 1 };
// ~~~~ Cannot assign to 'inner' because it is a read-only property
o.inner.x = 1;  // OK
type T = Readonly<Outer>;
// Type T = {
//   readonly inner: {
//     x: number;
//   };
// }
 ```
    
ì¤‘ìš”í•œ ì ì€ `readonly`ì ‘ê·¼ì œì–´ìëŠ” innerì— ì ìš©ë˜ëŠ” ê²ƒì´ì§€ xëŠ” ì•„ë‹ˆë¼ëŠ” ê²ƒì´ë‹¤.   
í˜„ì¬ ì‹œì ì—ëŠ” ê¹Šì€ readonly íƒ€ì…ì´ ê¸°ë³¸ìœ¼ë¡œ ì§€ì›ë˜ì§€ ì•Šì§€ë§Œ, ì œë„ˆë¦­ì„ ë§Œë“¤ë©´ ê¹Šì€ `readonly`íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   
ê·¸ëŸ¬ë‚˜ ì œë„ˆë¦­ì€ ë§Œë“¤ê¸° ê¹Œë‹¤ë¡­ê¸° ë•Œë¬¸ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ë‚«ë‹¤.   
ì˜ˆë¥¼ ë“¤ì–´ `ts-essentials`ì— ìˆëŠ” `DeepReadonly` ì œë„ˆë¦­ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.   
   
ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì—ë„ `readonly`ë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.   
ì½ê¸°ëŠ” í—ˆìš©í•˜ë˜ ì“°ê¸°ë¥¼ ë°©ì§€í•˜ëŠ” íš¨ê³¼ê°€ ìˆë‹¤.   
```ts
let obj: {readonly [k: string]: number} = {};
// Or Readonly<{[k: string]: number}
obj.hi = 45;
//  ~~ Index signature in type ... only permits reading
obj = {...obj, hi: 12};  // OK
obj = {...obj, bye: 34};  // OK
```

ì´ ì½”ë“œì²˜ëŸ¼ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì— readonlyë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ì˜ ì†ì„±ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.   
  
## ìš”ì•½
- ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ `readonly`ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. `readonly`ë§¤ê°œë³€ìˆ˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…í™•í•˜ê²Œ í•˜ë©°, ë§¤ê°œë³€ìˆ˜ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.
- readonlyë¥¼ ì‚¬ìš©í•˜ë©´ ë³€ê²½í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê³ , ë³€ê²½ì´ ë°œìƒí•˜ëŠ” ì½”ë“œë„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤.   
- constì™€ readonlyì˜ ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.   
- readonlyëŠ” ì–•ê²Œ ë™ì‘í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•´ì•¼ í•œë‹¤.
  
